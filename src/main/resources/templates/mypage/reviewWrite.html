<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>All it - I have a All it</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<link rel="stylesheet" th:href="@{ /css/files.css }">
<link rel="stylesheet" th:href="@{ https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css }">
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

<body th:align="center">
<form th:action="@{ /member/writeReview }" method="post" enctype="multipart/form-data">
	<table>
		<tr>
			<td>
				<input type="file" name="imageFile" id="imageFile" multiple>
			</td>
		</tr>
		<tr>
			<td bgcolor="orange" th:text="내용"></td>
			<td align="left">
				<textarea name="content" id="content" cols="40" rows="10"></textarea>
			</td>
		</tr>
		<tr>
			<td>
				<select class="form-control" name="rating" id="rating">
					<option th:value="1">1</option>
					<option th:value="2">2</option>
					<option th:value="3">3</option>
					<option th:value="4">4</option>
					<option th:value="5">5</option>	
				</select>
			</td>
		</tr>
		<tr>
			<td colspan="2" align="center">
				<input type="hidden" th:value="${ ordersDetail.odno }" name="odno" id="odno">
				<input type="hidden" th:value="${ ordersDetail.product.pno }" name="pno" id="pno">
				<input type="hidden" th:value="${ ordersDetail.product.seller.id }" name="sid" id="sid">
				<input type="hidden" th:value="${ #authentication.principal.member?.id }" name="mid" id="mid">
				<input type="submit" class="btn btn-primary" value="등록" onclick="return save()"/>
			</td>
		</tr>
	</table>
</form>
</body>

<!-- 자바스트립트 섹션 시작 -->
<script type="text/javascript">
/* 아이디 찾기 */
function save() {
	let imageFile = $("#imageFile").val();
	let content = $("#content").val();
	console.log("content = ", content);

	if(imageFile.includes('{')) {
		alert("특수문자와 같은 부적절한 파일명이 포함되었습니다");
		return false;
	} else if(imageFile.includes('}')) {
		alert("특수문자와 같은 부적절한 파일명이 포함되었습니다");
		return false;
	} else if(imageFile.includes('(')) {
		alert("특수문자와 같은 부적절한 파일명이 포함되었습니다");
		return false;
	} else if(imageFile.includes(')')) {
		alert("특수문자와 같은 부적절한 파일명이 포함되었습니다");
		return false;
	} else if(imageFile.includes('[')) {
		alert("특수문자와 같은 부적절한 파일명이 포함되었습니다");
		return false;
	} else if(imageFile.includes(']')) {
		alert("특수문자와 같은 부적절한 파일명이 포함되었습니다");
		return false;
	} else if(content.trim() == '') {
		alert("리뷰내용을 작성해주세요");
		return false;
	}
}

/* 비밀번호 찾기 */
function findPassword() {
	if ($("#id2").val() == "") {
		alert("아이디를 입력해 주세요.");
		return false;
	} else if ($("#name2").val() == "") {
		alert("이름을 입력해 주세요.");
		return false;
	} else if ($("#email2").val() == "") {
		alert("이메일을 입력해 주세요.");
		return false;
	} else {
		$("#findPW").action = "findPw";  // 비밀번호 찾기 URL
		$("#findPW").submit();
	}
}
</script>
<!-- 자바스트립트 섹션 끝 -->

<div th:replace="~{ /fragments/footer.html :: footer }"></div>
<!-- footer replace -->